# 레지스터 전송과 마이크로 연산

> 본 글은 아래 강의를 바탕으로 작성되었습니다.
>
> [CSA2021 컴퓨터시스템구조 제 4 장 Part-1](https://youtu.be/LDjco5XJH1E)

<br>

## 목차

[1. 레지스터 전송 언어](#1-레지스터-전송-언어)

[2. 레지스터 전송](#2-레지스터-전송)

[3. 버스와 메모리 전송](#3-버스와-메모리-전송)

[4. 산술 마이크로 연산](#4-산술-마이크로-연산)

[5. 논리 마이크로 연산](#5-논리-마이크로-연산)

[6. 시프트 마이크로 연산](#6-시프트-마이크로-연산)

<br>

## 1. 레지스터 전송 언어

### 마이크로연산

- 레지스터에 저장된 데이터를 가지고 실행되는 동작(하나의 레지스터에서 다른 레지스터로 데이터를 전송하거나, 받는 등의 동작)
- 레지스터 내의 플립플롭이 하나의 clock 시간 동안 실행되는 기본 동작(레지스터 안의 데이터를 시프트 하거나 count, clear, load 하는 등의 동작)

### 레지스터 전송 언어

마이크로 연산, 전송을 간단하고 명료하게 나타내기 위해 사용하는 기호가 존재한다. 디지털 컴퓨터의 내부 조직을 상세하게 표현하기 위해 사용되며 이를 통해 디지털 시스템 설계의 편의성을 제공한다.

### 레지스터 전송 언어 규칙

- 레지스터의 이름은 항상 대문자로 표시(MAR, MBR, AC, PC, DR 등)
- 레지스터에서 가장 왼쪽에 있는 플립플롭이 전달하는 비트를 MSB, 가장 오른쪽에 있는 플립플롭이 전달하는 비트를 LSB라고 한다. 
  - 예를 들어 16비트의 PC 레지스터의 경우 상위 비트(8\~15)를 PC(H)라고 하며 하위(0\~7) 비트를 PC(L)라고 한다.

<br>

## 2. 레지스터 전송

### 레지스터 정보 전송

- 치환 연산자 사용
  - R2 <- R1
- 제어 조건
  - If (P = 1) then (R2 <- R1)
- 제어 함수로 표현
  - P: R2 <- R1 
  - P ? R2 = 0 : R1 = 0
  - R1에 t 타이밍에 데이터가 전송되었다면 R2에는 (t+1) 타이밍에 전송 완료
  - 레지스터는 항상 동작이 끝나면 그다음 동작은 다음 클록 펄스에 이루어진다. 

### 레지스터 전송의 기본 기호

- Register data exchange(데이터 교환)
  - T: R2 <- R1, R1 <- R2 

<br>

## 3. 버스와 메모리 전송

### 공통 버스

레지스터 사이의 전송 통로를 버스라 한다. 따라서 여러개의 장치나 레지스터가 하나의 버스를 동시에 이용할 수 없고 한 번에 하나의 신호만 전송해야 한다. 이때 멀티플렉서를 이용하여 어떤 장치 또는 레지스터가 어떤 버스를 사용할지 결정한다.

### 3-상태 버퍼

레지스터마다 멀티플렉서를 연결하는 대신 버퍼를 이용해 버스를 더 간단하게 구성할 수 있다. 각 레지스터에 연결된 모든 3-상태 버퍼를 하나의 디코더에 연결하면 디코더에서 하나의 버퍼만을 선택하고 해당 버퍼만 control input을 1로 만들 수 있다.

- 3개의 상태
  - 논리 0, 논리 1: 정상적인 버퍼로 동작(버퍼의 control input이 1일 때)
  - 고저항 상태: 출력 차단(버퍼의 control input이 0일 때)

### 메모리 전송

- Read: DR <- M[AR]
- Write: M[AR] <- R1

<br>

## 4. 산술 마이크로 연산

### 마이크로 연산의 분류

- 레지스터 전송 마이크로 연산: 레지스터 간 이진 정보 전송
- 산술 마이크로 연산: 수치 데이터에 대한 산술 연산
- 논리 마이크로 연산: 비수치 데이터에 대한 비트 조작 연산
- 시프트 마이크로 연산: 데이터에 대한 시프트 연산

### 이진 가산기

이진 가산기는 두 비트의 이진 캐리의 산술 합을 계산한다. 여러 개의 전가산기를 연결하여 구성되어 있다.

### 이진 감가산기

이진 감가산기는 보수를 만드는 게이트와 신호를 사용한다.

### 산술 회로

- 4개의 전가산기
- 4개의 멀티플렉서
- 2개의 4비트 입력
- 1개의 출력
- 3개의 제어 라인

<br>

## 5. 논리 마이크로 연산

16가지 기본 논리 마이크로 연산과 그 진리표는 다음과 같다.

![](https://padakuu.com/image/Capture(23).png)

![Computer Organization and Architecture (Logic Microoperations) - UPSC FEVER](https://upscfever.com/upsc-fever/en/gatecse/images/registers15.png)

<br>

## 6. 시프트 마이크로 연산

### 논리 시프트

직렬 입력으로 빈 곳에 0이 전송된다. 

- R1 <- shl(R1)
- R2 <- shr(R2)

### 순환 시프트

직렬 출력이 직렬 입력으로 전송된다.

- cir, cil

### 산술 시프트

부호 비트를 제외하고 시프트 한다.

- 왼쪽 시프트는 2가 곱해지고 오른쪽 시프트는 2가 나눠진다.